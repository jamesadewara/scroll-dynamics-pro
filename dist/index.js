"use strict";var e=require("react/jsx-runtime"),t=require("react"),r=t.createContext(null),n=function(){var e=t.useContext(r);if(!e)throw new Error("useScroll must be used within a ScrollProvider");return e},i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var o={clamp:function(e,t,r){return Math.min(r,Math.max(t,e))},mapRange:function(e,t,r,n,i){return n+(e-t)/(r-t)*(i-n)},lerp:function(e,t,r){return e*(1-r)+t*r},abs:function(e){return Math.abs(e)},min:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e)},max:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e)},floor:function(e){return Math.floor(e)},cos:function(e){return Math.cos(e)},sin:function(e){return Math.sin(e)},PI:Math.PI},c=function(e){var r=t.useState(0),i=r[0],c=r[1],s=n().subscribe;return t.useEffect(function(){var t=e.current;if(t){var r=!1,n={top:0,height:0,windowHeight:0},i=new IntersectionObserver(function(e){var i=e[0];if(r=i.isIntersecting){var o=t.getBoundingClientRect(),c=window.scrollY||window.pageYOffset;n={top:o.top+c,height:o.height,windowHeight:window.innerHeight}}},{threshold:0});i.observe(t);var a=s(function(e){if(r){var t=n.top,i=n.height-n.windowHeight;if(!(i<=0)){var s=(e-t)/i;s=o.clamp(s,0,1),c(s)}}});return function(){i.disconnect(),a()}}},[e,s]),i};exports.ScrollProvider=function(n){var i=n.children,o=n.containerRef,c=t.useRef(new Set),s=t.useRef(0),a=t.useRef(!1),l=t.useRef(0);t.useEffect(function(){var e=(null==o?void 0:o.current)||("undefined"!=typeof window?window:null);if(e){var t=function(){return e instanceof Window?e.scrollY:e.scrollTop},r=t();s.current=r,l.current=r;var n=function(){var e=t(),r=e-l.current;s.current=e,l.current=e,c.current.forEach(function(e){return e(s.current,r)}),a.current=!1},i=function(){a.current||(requestAnimationFrame(n),a.current=!0)};return e.addEventListener("scroll",i,{passive:!0}),e instanceof Window&&e.addEventListener("resize",i,{passive:!0}),function(){e.removeEventListener("scroll",i),e instanceof Window&&e.removeEventListener("resize",i)}}},[o]);return e.jsx(r.Provider,{value:{subscribe:function(e){return c.current.add(e),e(s.current,0),function(){c.current.delete(e)}},getScrollY:function(){return s.current}},children:i})},exports.ScrollSection=function(r){var c=r.direction,s=void 0===c?"vertical":c,a=r.children,l=r.className,u=r.style,f=r.trackLength,d=void 0===f?"300vw":f,h=n().subscribe,v=t.useRef(null),p=t.useRef(null),w=t.useRef(!1);t.useEffect(function(){var e=new IntersectionObserver(function(e){var t=e[0];w.current=t.isIntersecting},{threshold:0});return v.current&&e.observe(v.current),function(){return e.disconnect()}},[]);var g=t.useRef({offsetTop:0,trackHeight:0,windowHeight:0,scrollWidth:0,windowWidth:0});return t.useEffect(function(){if("horizontal"===s){var e=function(){if(v.current&&p.current){var e=v.current.getBoundingClientRect(),t=window.scrollY||window.pageYOffset;g.current={offsetTop:e.top+t,trackHeight:e.height,windowHeight:window.innerHeight,scrollWidth:p.current.scrollWidth,windowWidth:window.innerWidth}}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}},[s,a]),t.useEffect(function(){if("horizontal"===s)return h(function(e){if(w.current&&v.current&&p.current){var t=g.current,r=t.offsetTop,n=t.trackHeight,i=t.windowHeight,c=t.scrollWidth,s=t.windowWidth,a=n-i;if(!(a<=0)){var l=o.clamp(-(r-e)/a,0,1),u=c-s;if(u>0){var f=l*u;p.current.style.transform="translateX(-".concat(f,"px)")}}}})},[s,h]),t.useLayoutEffect(function(){if("horizontal"===s&&v.current&&p.current){var e=v.current.getBoundingClientRect(),t=-e.top/(e.height-window.innerHeight),r=o.clamp(t,0,1),n=p.current,i=n.scrollWidth-window.innerWidth;i>0&&(n.style.transform="translateX(-".concat(r*i,"px)"))}},[s]),"vertical"===s?e.jsx("div",{className:l,style:u,children:a}):e.jsx("div",{ref:v,className:l,style:i({position:"relative",height:d},u),children:e.jsx("div",{style:{position:"sticky",top:0,height:"100vh",width:"100%",overflow:"hidden"},children:e.jsx("div",{ref:p,style:{height:"100%",display:"flex",willChange:"transform"},children:a})})})},exports.ScrollTransform=function(r){var c=r.children,s=r.effect,a=void 0===s?"parallax":s,l=r.speed,u=void 0===l?.2:l,f=r.intensity,d=void 0===f?1:f,h=r.direction,v=void 0===h?"up":h,p=r.range,w=void 0===p?[0,1]:p,g=r.transform,y=r.onEnter,m=r.onLeave,x=r.className,b=r.style,E=n().subscribe,R=t.useRef(null),S=t.useRef(!1),Y=t.useRef(0);return t.useEffect(function(){var e=new IntersectionObserver(function(e){var t=e[0],r=S.current;if(S.current=t.isIntersecting,t.isIntersecting){if(!r&&y&&y(),R.current){var n=R.current.getBoundingClientRect();Y.current=n.top+window.scrollY}}else r&&m&&m()},{threshold:0});return R.current&&e.observe(R.current),function(){return e.disconnect()}},[]),t.useEffect(function(){return E(function(e,t){if(S.current&&R.current){var r=R.current,n=r.getBoundingClientRect(),i=window.innerHeight,c=i+n.height,s=(i-n.top)/c,l=w[0],f=w[1],h=0;if(h=l===f?s>=l?1:0:o.clamp((s-l)/(f-l),0,1),"parallax"===a){var p=(n.top-i/2)*u;r.style.transform="translateY(".concat(p,"px)")}else if("fade"===a)r.style.opacity=h.toString(),d>0&&(r.style.transform="translateY(".concat(20*(1-h)*d,"px)"));else if("scale"===a){var y=.8+.2*o.clamp(h,0,1)*d;r.style.transform="scale(".concat(y,")")}else if("skew-velocity"===a){var m=15*d,x=o.max(-m,o.min(m,.1*t)),b=1+o.min(.2,o.abs(5e-4*t)*d);r.style.transform="skewY(".concat(x,"deg) scaleY(").concat(b,")")}else if("rotate"===a){var E=2*(h-.5)*(45*d);r.style.transform="rotate(".concat(E,"deg)")}else if("rotate-x"===a){E=2*(.5-h)*(45*d);r.style.transform="perspective(1000px) rotateX(".concat(E,"deg)")}else if("rotate-y"===a){E=2*(h-.5)*(45*d);r.style.transform="perspective(1000px) rotateY(".concat(E,"deg)")}else if("slide-in"===a)if(h>=1)r.style.transform="none",r.style.opacity="1";else{var Y=(1-h)*(100*d);r.style.opacity=h.toString(),"up"===v?r.style.transform="translateY(".concat(Y,"px)"):"down"===v?r.style.transform="translateY(".concat(-Y,"px)"):"left"===v?r.style.transform="translateX(".concat(Y,"px)"):"right"===v&&(r.style.transform="translateX(".concat(-Y,"px)"))}else if("blur"===a){var H=10*(1-h)*d;r.style.filter="blur(".concat(H,"px)"),r.style.opacity=h.toString()}else if("hue-rotate"===a){E=360*h*d;r.style.filter="hue-rotate(".concat(E,"deg)")}else"custom"===a&&g&&g(r,h,e,t)}})},[a,u,d,v,w,g,E]),e.jsx("div",{ref:R,className:x,style:i({willChange:"transform, opacity"},b),children:c})},exports.ScrollUtils=o,exports.Scrollytelling=function(r){var n=r.height,o=void 0===n?"300vh":n,s=r.children,a=r.className,l=r.style,u=t.useRef(null),f=c(u);return e.jsx("div",{ref:u,className:a,style:i({height:o,position:"relative"},l),children:e.jsx("div",{style:{position:"sticky",top:0,height:"100vh",width:"100%",overflow:"hidden"},children:s(f)})})},exports.useScroll=n,exports.useScrollProgress=c;
//# sourceMappingURL=index.js.map
