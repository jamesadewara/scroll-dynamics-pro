"use strict";var e=require("react"),t=e.createContext(null),r=function(){var r=e.useContext(t);if(!r)throw new Error("useScroll must be used within a ScrollProvider");return r},n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var i={clamp:function(e,t,r){return Math.min(r,Math.max(t,e))},mapRange:function(e,t,r,n,i){return n+(e-t)/(r-t)*(i-n)},lerp:function(e,t,r){return e*(1-r)+t*r},abs:function(e){return Math.abs(e)},min:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e)},max:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e)},floor:function(e){return Math.floor(e)},cos:function(e){return Math.cos(e)},sin:function(e){return Math.sin(e)},PI:Math.PI},o=function(t){var n=e.useState(0),o=n[0],c=n[1],s=r().subscribe;return e.useEffect(function(){var e=t.current;if(e){var r=!1,n={top:0,height:0,windowHeight:0},o=new IntersectionObserver(function(t){var i=t[0];if(r=i.isIntersecting){var o=e.getBoundingClientRect(),c=window.scrollY||window.pageYOffset;n={top:o.top+c,height:o.height,windowHeight:window.innerHeight}}},{threshold:0});o.observe(e);var a=s(function(e){if(r){var t=n.top,o=n.height-n.windowHeight;if(!(o<=0)){var s=(e-t)/o;s=i.clamp(s,0,1),c(s)}}});return function(){o.disconnect(),a()}}},[t,s]),o};exports.ScrollProvider=function(r){var n=r.children,i=r.containerRef,o=e.useRef(new Set),c=e.useRef(0),s=e.useRef(!1),a=e.useRef(0);e.useEffect(function(){var e=(null==i?void 0:i.current)||("undefined"!=typeof window?window:null);if(e){var t=function(){return e instanceof Window?e.scrollY:e.scrollTop},r=t();c.current=r,a.current=r;var n=function(){var e=t(),r=e-a.current;c.current=e,a.current=e,o.current.forEach(function(e){return e(c.current,r)}),s.current=!1},l=function(){s.current||(requestAnimationFrame(n),s.current=!0)};return e.addEventListener("scroll",l,{passive:!0}),e instanceof Window&&e.addEventListener("resize",l,{passive:!0}),function(){e.removeEventListener("scroll",l),e instanceof Window&&e.removeEventListener("resize",l)}}},[i]);return e.createElement(t.Provider,{value:{subscribe:function(e){return o.current.add(e),e(c.current,0),function(){o.current.delete(e)}},getScrollY:function(){return c.current}}},n)},exports.ScrollSection=function(t){var o=t.direction,c=void 0===o?"vertical":o,s=t.children,a=t.className,l=t.style,u=t.trackLength,f=void 0===u?"300vw":u,d=r().subscribe,h=e.useRef(null),v=e.useRef(null),p=e.useRef(!1);e.useEffect(function(){var e=new IntersectionObserver(function(e){var t=e[0];p.current=t.isIntersecting},{threshold:0});return h.current&&e.observe(h.current),function(){return e.disconnect()}},[]);var w=e.useRef({offsetTop:0,trackHeight:0,windowHeight:0,scrollWidth:0,windowWidth:0});return e.useEffect(function(){if("horizontal"===c){var e=function(){if(h.current&&v.current){var e=h.current.getBoundingClientRect(),t=window.scrollY||window.pageYOffset;w.current={offsetTop:e.top+t,trackHeight:e.height,windowHeight:window.innerHeight,scrollWidth:v.current.scrollWidth,windowWidth:window.innerWidth}}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}},[c,s]),e.useEffect(function(){if("horizontal"===c)return d(function(e){if(p.current&&h.current&&v.current){var t=w.current,r=t.offsetTop,n=t.trackHeight,o=t.windowHeight,c=t.scrollWidth,s=t.windowWidth,a=n-o;if(!(a<=0)){var l=i.clamp(-(r-e)/a,0,1),u=c-s;if(u>0){var f=l*u;v.current.style.transform="translateX(-".concat(f,"px)")}}}})},[c,d]),e.useLayoutEffect(function(){if("horizontal"===c&&h.current&&v.current){var e=h.current.getBoundingClientRect(),t=-e.top/(e.height-window.innerHeight),r=i.clamp(t,0,1),n=v.current,o=n.scrollWidth-window.innerWidth;o>0&&(n.style.transform="translateX(-".concat(r*o,"px)"))}},[c]),"vertical"===c?e.createElement("div",{className:a,style:l},s):e.createElement("div",{ref:h,className:a,style:n({position:"relative",height:f},l)},e.createElement("div",{style:{position:"sticky",top:0,height:"100vh",width:"100%",overflow:"hidden"}},e.createElement("div",{ref:v,style:{height:"100%",display:"flex",willChange:"transform"}},s)))},exports.ScrollTransform=function(t){var o=t.children,c=t.effect,s=void 0===c?"parallax":c,a=t.speed,l=void 0===a?.2:a,u=t.intensity,f=void 0===u?1:u,d=t.direction,h=void 0===d?"up":d,v=t.range,p=void 0===v?[0,1]:v,w=t.transform,g=t.onEnter,m=t.onLeave,y=t.className,x=t.style,E=r().subscribe,b=e.useRef(null),R=e.useRef(!1),S=e.useRef(0);return e.useEffect(function(){var e=new IntersectionObserver(function(e){var t=e[0],r=R.current;if(R.current=t.isIntersecting,t.isIntersecting){if(!r&&g&&g(),b.current){var n=b.current.getBoundingClientRect();S.current=n.top+window.scrollY}}else r&&m&&m()},{threshold:0});return b.current&&e.observe(b.current),function(){return e.disconnect()}},[]),e.useEffect(function(){return E(function(e,t){if(R.current&&b.current){var r=b.current,n=r.getBoundingClientRect(),o=window.innerHeight,c=o+n.height,a=(o-n.top)/c,u=p[0],d=p[1],v=0;if(v=u===d?a>=u?1:0:i.clamp((a-u)/(d-u),0,1),"parallax"===s){var g=(n.top-o/2)*l;r.style.transform="translateY(".concat(g,"px)")}else if("fade"===s)r.style.opacity=v.toString(),f>0&&(r.style.transform="translateY(".concat(20*(1-v)*f,"px)"));else if("scale"===s){var m=.8+.2*i.clamp(v,0,1)*f;r.style.transform="scale(".concat(m,")")}else if("skew-velocity"===s){var y=15*f,x=i.max(-y,i.min(y,.1*t)),E=1+i.min(.2,i.abs(5e-4*t)*f);r.style.transform="skewY(".concat(x,"deg) scaleY(").concat(E,")")}else if("rotate"===s){var S=2*(v-.5)*(45*f);r.style.transform="rotate(".concat(S,"deg)")}else if("rotate-x"===s){S=2*(.5-v)*(45*f);r.style.transform="perspective(1000px) rotateX(".concat(S,"deg)")}else if("rotate-y"===s){S=2*(v-.5)*(45*f);r.style.transform="perspective(1000px) rotateY(".concat(S,"deg)")}else if("slide-in"===s)if(v>=1)r.style.transform="none",r.style.opacity="1";else{var Y=(1-v)*(100*f);r.style.opacity=v.toString(),"up"===h?r.style.transform="translateY(".concat(Y,"px)"):"down"===h?r.style.transform="translateY(".concat(-Y,"px)"):"left"===h?r.style.transform="translateX(".concat(Y,"px)"):"right"===h&&(r.style.transform="translateX(".concat(-Y,"px)"))}else if("blur"===s){var H=10*(1-v)*f;r.style.filter="blur(".concat(H,"px)"),r.style.opacity=v.toString()}else if("hue-rotate"===s){S=360*v*f;r.style.filter="hue-rotate(".concat(S,"deg)")}else"custom"===s&&w&&w(r,v,e,t)}})},[s,l,f,h,p,w,E]),e.createElement("div",{ref:b,className:y,style:n({willChange:"transform, opacity"},x)},o)},exports.ScrollUtils=i,exports.Scrollytelling=function(t){var r=t.height,i=void 0===r?"300vh":r,c=t.children,s=t.className,a=t.style,l=e.useRef(null),u=o(l);return e.createElement("div",{ref:l,className:s,style:n({height:i,position:"relative"},a)},e.createElement("div",{style:{position:"sticky",top:0,height:"100vh",width:"100%",overflow:"hidden"}},c(u)))},exports.useScroll=r,exports.useScrollProgress=o;
//# sourceMappingURL=index.js.map
